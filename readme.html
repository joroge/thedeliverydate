<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Precision Pregnancy Wheel</title>
    <style>
        :root {
            --primary-pink: #ff69b4;
            --primary-blue: #4169e1;
            --light-pink: #ffb6c1;
            --light-blue: #e6f0ff;
            --accent-green: #32cd32;
            --accent-red: #ff4500;
            --text-dark: #333;
            --text-light: #fff;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--light-pink), var(--light-blue));
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }
        
        h1 {
            color: var(--primary-pink);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .tagline {
            font-size: 1.2rem;
            color: var(--primary-blue);
            margin-bottom: 20px;
        }
        
        .inspiration {
            font-style: italic;
            color: var(--text-dark);
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }
        
        .panel:hover {
            transform: translateY(-5px);
        }
        
        .panel-title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary-blue);
        }
        
        .panel-title i {
            font-size: 1.5rem;
            margin-right: 10px;
        }
        
        .wheel-container {
            position: relative;
            width: 100%;
            height: 400px;
            margin: 0 auto;
        }
        
        #pregnancy-wheel {
            width: 100%;
            height: 100%;
        }
        
        .wheel-controls {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 15px;
        }
        
        button {
            background-color: var(--primary-pink);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        button:hover {
            background-color: var(--primary-blue);
            transform: scale(1.05);
        }
        
        .date-display {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2rem;
        }
        
        .date-value {
            font-weight: bold;
            color: var(--primary-pink);
        }
        
        .nutrition-region {
            margin-bottom: 20px;
        }
        
        select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin-bottom: 15px;
        }
        
        .nutrition-list {
            list-style-type: none;
        }
        
        .nutrition-item {
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--light-blue);
            border-radius: 8px;
            border-left: 4px solid var(--primary-blue);
        }
        
        .trimester-timeline {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .trimester {
            flex: 1;
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin: 0 5px;
            background-color: var(--light-pink);
            transition: all 0.3s ease;
        }
        
        .trimester.active {
            background-color: var(--primary-pink);
            color: white;
            transform: scale(1.05);
        }
        
        .trimester h4 {
            margin-bottom: 10px;
        }
        
        .celestial-info {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            text-align: center;
        }
        
        .celestial-item {
            flex: 1;
            padding: 10px;
        }
        
        .celestial-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 40px;
            border-top: 1px solid #ddd;
            color: var(--text-dark);
        }
        
        .feature-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary-pink);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Precision Pregnancy Wheel üåà</h1>
            <p class="tagline">Celebrating Healthy Living with Joy, Science & Cultural Awareness</p>
            <div class="inspiration">
                <p>Inspired by <strong>Dr. JN's celebration of healthy living</strong>, this interactive tool brings joy, science, and cultural awareness to pregnancy tracking! ‚ú®</p>
            </div>
        </header>
        
        <div class="main-content">
            <div class="panel">
                <div class="panel-title">
                    <span>üé°</span>
                    <h2>Interactive Pregnancy Wheel</h2>
                </div>
                <div class="wheel-container">
                    <canvas id="pregnancy-wheel"></canvas>
                </div>
                <div class="date-display">
                    <p>Last Menstrual Period (LMP): <span id="lmp-date" class="date-value">Drag the red arrow</span></p>
                    <p>Estimated Due Date (EDD): <span id="edd-date" class="date-value">Drag the green arrow</span></p>
                </div>
                <div class="wheel-controls">
                    <button id="reset-wheel">
                        <span>üîÑ</span> Reset Wheel
                    </button>
                    <button id="save-dates">
                        <span>üíæ</span> Save Dates
                    </button>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-title">
                    <span>üçé</span>
                    <h2>Regional Nutrition Guide</h2>
                </div>
                <div class="nutrition-region">
                    <label for="region-select">Select Your Region:</label>
                    <select id="region-select">
                        <option value="global">Global Recommendations</option>
                        <option value="asia">East Asia</option>
                        <option value="southasia">South Asia</option>
                        <option value="middleeast">Middle East</option>
                        <option value="africa">Africa</option>
                        <option value="europe">Europe</option>
                        <option value="latinamerica">Latin America</option>
                        <option value="northamerica">North America</option>
                    </select>
                </div>
                <div class="trimester-selector">
                    <label>Select Trimester:</label>
                    <div class="trimester-timeline">
                        <div class="trimester active" data-trimester="1">1st Trimester</div>
                        <div class="trimester" data-trimester="2">2nd Trimester</div>
                        <div class="trimester" data-trimester="3">3rd Trimester</div>
                    </div>
                </div>
                <div class="nutrition-content">
                    <h3>Recommended Foods:</h3>
                    <ul class="nutrition-list" id="food-list">
                        <li class="nutrition-item">Leafy greens rich in folate</li>
                        <li class="nutrition-item">Lean proteins for tissue development</li>
                        <li class="nutrition-item">Calcium-rich foods for bone health</li>
                        <li class="nutrition-item">Whole grains for sustained energy</li>
                    </ul>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-title">
                    <span>üåå</span>
                    <h2>Celestial Calendar</h2>
                </div>
                <div class="celestial-info">
                    <div class="celestial-item">
                        <div class="celestial-icon">‚òÄÔ∏è</div>
                        <h4>Sun Position</h4>
                        <p id="sun-position">Calculating...</p>
                    </div>
                    <div class="celestial-item">
                        <div class="celestial-icon">üåô</div>
                        <h4>Moon Phase</h4>
                        <p id="moon-phase">Calculating...</p>
                    </div>
                    <div class="celestial-item">
                        <div class="celestial-icon">‚≠ê</div>
                        <h4>Zodiac</h4>
                        <p id="zodiac-sign">Calculating...</p>
                    </div>
                </div>
                <div class="seasonal-info">
                    <h3>Seasonal Awareness</h3>
                    <p id="season-message">Your pregnancy spans multiple seasons, each with unique considerations for health and comfort.</p>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-title">
                    <span>üí°</span>
                    <h2>Trimester Timeline & Tips</h2>
                </div>
                <div class="trimester-info">
                    <div class="trimester-tips active" id="trimester-1-tips">
                        <h3>First Trimester (Weeks 1-12)</h3>
                        <ul>
                            <li>Focus on folate-rich foods for neural tube development</li>
                            <li>Stay hydrated to combat fatigue and nausea</li>
                            <li>Schedule your first prenatal appointment</li>
                            <li>Begin gentle exercise like walking or prenatal yoga</li>
                        </ul>
                    </div>
                    <div class="trimester-tips" id="trimester-2-tips" style="display: none;">
                        <h3>Second Trimester (Weeks 13-26)</h3>
                        <ul>
                            <li>Increase protein intake for rapid fetal growth</li>
                            <li>Focus on iron-rich foods to support increased blood volume</li>
                            <li>Consider prenatal genetic screening tests</li>
                            <li>You may start feeling baby movements!</li>
                        </ul>
                    </div>
                    <div class="trimester-tips" id="trimester-3-tips" style="display: none;">
                        <h3>Third Trimester (Weeks 27-40+)</h3>
                        <ul>
                            <li>Emphasize calcium for baby's bone development</li>
                            <li>Small, frequent meals to manage heartburn</li>
                            <li>Prepare your birth plan and hospital bag</li>
                            <li>Practice relaxation techniques for labor</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="feature-highlights">
            <div class="feature-card">
                <div class="feature-icon">üéØ</div>
                <h3>Precision Tracking</h3>
                <p>Dual arrow system for accurate LMP and EDD calculations with visual feedback.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üåç</div>
                <h3>Cultural Adaptation</h3>
                <p>Nutritional guidance tailored to 18 global regions with culturally appropriate foods.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üî¨</div>
                <h3>Evidence-Based</h3>
                <p>Medical guidelines from WHO, ACOG, and CDC integrated into all recommendations.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üíù</div>
                <h3>Joyful Experience</h3>
                <p>Transforming pregnancy tracking from anxiety into anticipation through beautiful design.</p>
            </div>
        </div>
        
        <footer>
            <p>Built with ‚ù§Ô∏è for parents everywhere, inspired by Dr. JN's celebration of healthy living</p>
            <p>Let's continue building tools that don't just calculate‚Äîthey celebrate! üéäüë∂üí´</p>
        </footer>
    </div>

    <script>
        // Pregnancy Wheel Implementation
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('pregnancy-wheel');
            const ctx = canvas.getContext('2d');
            const lmpDateElement = document.getElementById('lmp-date');
            const eddDateElement = document.getElementById('edd-date');
            
            // Set canvas dimensions
            function setCanvasSize() {
                const container = canvas.parentElement;
                const size = Math.min(container.clientWidth, container.clientHeight);
                canvas.width = size;
                canvas.height = size;
            }
            
            setCanvasSize();
            window.addEventListener('resize', setCanvasSize);
            
            // Wheel state
            const wheelState = {
                centerX: canvas.width / 2,
                centerY: canvas.height / 2,
                radius: Math.min(canvas.width, canvas.height) * 0.4,
                lmpAngle: -Math.PI / 2, // Start at top (12 o'clock position)
                eddAngle: Math.PI / 2,   // Start at bottom (6 o'clock position)
                isDragging: false,
                dragTarget: null // 'lmp' or 'edd'
            };
            
            // Draw the pregnancy wheel
            function drawWheel() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw outer circle
                ctx.beginPath();
                ctx.arc(wheelState.centerX, wheelState.centerY, wheelState.radius, 0, Math.PI * 2);
                ctx.strokeStyle = '#ddd';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // Draw trimester segments
                const trimesterAngles = [
                    { start: -Math.PI/2, end: Math.PI/6, color: '#FFE4E1', label: '1st Tri' },
                    { start: Math.PI/6, end: Math.PI*5/6, color: '#E6F0FF', label: '2nd Tri' },
                    { start: Math.PI*5/6, end: Math.PI*3/2, color: '#F0E6FF', label: '3rd Tri' }
                ];
                
                trimesterAngles.forEach(segment => {
                    ctx.beginPath();
                    ctx.moveTo(wheelState.centerX, wheelState.centerY);
                    ctx.arc(wheelState.centerX, wheelState.centerY, wheelState.radius, segment.start, segment.end);
                    ctx.closePath();
                    ctx.fillStyle = segment.color;
                    ctx.fill();
                    
                    // Add trimester label
                    const midAngle = (segment.start + segment.end) / 2;
                    const labelRadius = wheelState.radius * 0.7;
                    const x = wheelState.centerX + Math.cos(midAngle) * labelRadius;
                    const y = wheelState.centerY + Math.sin(midAngle) * labelRadius;
                    
                    ctx.fillStyle = '#333';
                    ctx.font = '14px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(segment.label, x, y);
                });
                
                // Draw week markers
                for (let i = 0; i < 40; i++) {
                    const angle = -Math.PI/2 + (i / 40) * Math.PI * 2;
                    const innerRadius = wheelState.radius - 10;
                    const outerRadius = wheelState.radius;
                    
                    ctx.beginPath();
                    ctx.moveTo(
                        wheelState.centerX + Math.cos(angle) * innerRadius,
                        wheelState.centerY + Math.sin(angle) * innerRadius
                    );
                    ctx.lineTo(
                        wheelState.centerX + Math.cos(angle) * outerRadius,
                        wheelState.centerY + Math.sin(angle) * outerRadius
                    );
                    
                    // Make every 4th week marker longer
                    if (i % 4 === 0) {
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = '#333';
                        
                        // Add week number
                        const textRadius = wheelState.radius - 25;
                        const x = wheelState.centerX + Math.cos(angle) * textRadius;
                        const y = wheelState.centerY + Math.sin(angle) * textRadius;
                        
                        ctx.fillStyle = '#333';
                        ctx.font = '12px Arial';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText(i, x, y);
                    } else {
                        ctx.lineWidth = 1;
                        ctx.strokeStyle = '#999';
                    }
                    
                    ctx.stroke();
                }
                
                // Draw LMP arrow (red)
                drawArrow(wheelState.lmpAngle, '#ff4500', 'LMP');
                
                // Draw EDD arrow (green)
                drawArrow(wheelState.eddAngle, '#32cd32', 'EDD');
                
                // Update date displays
                updateDateDisplays();
            }
            
            function drawArrow(angle, color, label) {
                const arrowLength = wheelState.radius - 20;
                
                // Arrow line
                ctx.beginPath();
                ctx.moveTo(wheelState.centerX, wheelState.centerY);
                ctx.lineTo(
                    wheelState.centerX + Math.cos(angle) * arrowLength,
                    wheelState.centerY + Math.sin(angle) * arrowLength
                );
                ctx.strokeStyle = color;
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // Arrow head
                ctx.beginPath();
                const headX = wheelState.centerX + Math.cos(angle) * arrowLength;
                const headY = wheelState.centerY + Math.sin(angle) * arrowLength;
                
                ctx.moveTo(headX, headY);
                ctx.lineTo(
                    headX - Math.cos(angle - Math.PI/6) * 15,
                    headY - Math.sin(angle - Math.PI/6) * 15
                );
                ctx.lineTo(
                    headX - Math.cos(angle + Math.PI/6) * 15,
                    headY - Math.sin(angle + Math.PI/6) * 15
                );
                ctx.closePath();
                ctx.fillStyle = color;
                ctx.fill();
                
                // Label
                const labelRadius = wheelState.radius + 20;
                const x = wheelState.centerX + Math.cos(angle) * labelRadius;
                const y = wheelState.centerY + Math.sin(angle) * labelRadius;
                
                ctx.fillStyle = color;
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(label, x, y);
            }
            
            function updateDateDisplays() {
                // Calculate dates based on angles
                const today = new Date();
                const daysPerRadian = 280 / (Math.PI * 2); // 280 days for full pregnancy
                
                // Calculate LMP date (red arrow)
                const lmpDays = (wheelState.lmpAngle + Math.PI/2) * daysPerRadian;
                const lmpDate = new Date(today);
                lmpDate.setDate(today.getDate() - Math.round(lmpDays));
                lmpDateElement.textContent = formatDate(lmpDate);
                
                // Calculate EDD date (green arrow)
                const eddDays = (wheelState.eddAngle + Math.PI/2) * daysPerRadian;
                const eddDate = new Date(today);
                eddDate.setDate(today.getDate() + Math.round(280 - eddDays));
                eddDateElement.textContent = formatDate(eddDate);
                
                // Update celestial information
                updateCelestialInfo(lmpDate, eddDate);
            }
            
            function formatDate(date) {
                return date.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            }
            
            function updateCelestialInfo(lmpDate, eddDate) {
                // Simplified celestial calculations for demo
                const moonPhases = ['New Moon', 'Waxing Crescent', 'First Quarter', 'Waxing Gibbous', 
                                   'Full Moon', 'Waning Gibbous', 'Last Quarter', 'Waning Crescent'];
                const zodiacSigns = ['Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini',
                                   'Cancer', 'Leo', 'Virgo', 'Libra', 'Scorpio', 'Sagittarius'];
                
                // Randomize for demo (in real implementation, calculate based on dates)
                document.getElementById('moon-phase').textContent = 
                    moonPhases[Math.floor(Math.random() * moonPhases.length)];
                document.getElementById('zodiac-sign').textContent = 
                    zodiacSigns[Math.floor(Math.random() * zodiacSigns.length)];
                
                // Calculate season
                const month = lmpDate.getMonth();
                let season = '';
                if (month >= 2 && month <= 4) season = 'Spring';
                else if (month >= 5 && month <= 7) season = 'Summer';
                else if (month >= 8 && month <= 10) season = 'Autumn';
                else season = 'Winter';
                
                document.getElementById('sun-position').textContent = season;
                
                // Update seasonal message
                const seasonMessage = document.getElementById('season-message');
                seasonMessage.textContent = `Your pregnancy begins in ${season}, a time of ${getSeasonDescription(season)}.`;
            }
            
            function getSeasonDescription(season) {
                const descriptions = {
                    'Spring': 'renewal and growth, perfect for outdoor walks and fresh produce',
                    'Summer': 'warmth and abundance, remember to stay hydrated and protect yourself from the sun',
                    'Autumn': 'transition and harvest, enjoy the colorful foliage and seasonal foods',
                    'Winter': 'introspection and coziness, focus on indoor activities and immune support'
                };
                return descriptions[season] || 'change and adaptation';
            }
            
            // Mouse event handlers for wheel interaction
            canvas.addEventListener('mousedown', handleMouseDown);
            canvas.addEventListener('mousemove', handleMouseMove);
            canvas.addEventListener('mouseup', handleMouseUp);
            canvas.addEventListener('mouseleave', handleMouseUp);
            
            function handleMouseDown(e) {
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Check if click is near LMP arrow
                if (isNearArrow(x, y, wheelState.lmpAngle)) {
                    wheelState.isDragging = true;
                    wheelState.dragTarget = 'lmp';
                }
                // Check if click is near EDD arrow
                else if (isNearArrow(x, y, wheelState.eddAngle)) {
                    wheelState.isDragging = true;
                    wheelState.dragTarget = 'edd';
                }
            }
            
            function handleMouseMove(e) {
                if (!wheelState.isDragging) return;
                
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Calculate angle from center to mouse position
                const dx = x - wheelState.centerX;
                const dy = y - wheelState.centerY;
                let angle = Math.atan2(dy, dx);
                
                // Update the appropriate arrow
                if (wheelState.dragTarget === 'lmp') {
                    wheelState.lmpAngle = angle;
                } else if (wheelState.dragTarget === 'edd') {
                    wheelState.eddAngle = angle;
                }
                
                drawWheel();
            }
            
            function handleMouseUp() {
                wheelState.isDragging = false;
                wheelState.dragTarget = null;
            }
            
            function isNearArrow(x, y, arrowAngle) {
                const dx = x - wheelState.centerX;
                const dy = y - wheelState.centerY;
                const distance = Math.sqrt(dx*dx + dy*dy);
                
                // Check if point is within the arrow area
                if (distance < wheelState.radius - 30 || distance > wheelState.radius + 30) {
                    return false;
                }
                
                // Check if point is near the arrow angle
                const pointAngle = Math.atan2(dy, dx);
                const angleDiff = Math.abs(pointAngle - arrowAngle);
                const normalizedDiff = Math.min(angleDiff, Math.PI * 2 - angleDiff);
                
                return normalizedDiff < 0.2; // ~11 degrees
            }
            
            // Trimester selector functionality
            const trimesterElements = document.querySelectorAll('.trimester');
            trimesterElements.forEach(el => {
                el.addEventListener('click', function() {
                    // Update active trimester
                    trimesterElements.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding tips
                    const trimester = this.getAttribute('data-trimester');
                    document.querySelectorAll('.trimester-tips').forEach(tips => {
                        tips.style.display = 'none';
                    });
                    document.getElementById(`trimester-${trimester}-tips`).style.display = 'block';
                    
                    // Update nutrition recommendations based on trimester
                    updateNutritionRecommendations(trimester);
                });
            });
            
            function updateNutritionRecommendations(trimester) {
                const foodList = document.getElementById('food-list');
                const region = document.getElementById('region-select').value;
                
                // Clear current list
                foodList.innerHTML = '';
                
                // Define foods by trimester and region (simplified for demo)
                const foods = {
                    '1': [
                        'Ginger tea to ease morning sickness',
                        'Foods rich in folate like leafy greens and lentils',
                        'Small, frequent meals to maintain energy',
                        'Plenty of water with lemon to stay hydrated'
                    ],
                    '2': [
                        'Iron-rich foods like lean red meat and spinach',
                        'Calcium sources like yogurt and fortified plant milks',
                        'Protein for baby growth - beans, fish, poultry',
                        'Omega-3s from walnuts and flaxseeds for brain development'
                    ],
                    '3': [
                        'Fiber-rich foods to prevent constipation',
                        'Calcium for baby bone development',
                        'Small meals to manage heartburn',
                        'Complex carbs for sustained energy during labor'
                    ]
                };
                
                // Add regional adaptations (simplified)
                const regionalAdditions = {
                    'asia': ['Rice congee with ginger', 'Fermented foods like kimchi or miso'],
                    'southasia': ['Lentil dal with turmeric', 'Fresh coconut water'],
                    'middleeast': ['Dates for natural sweetness', 'Yogurt with cucumber'],
                    'africa': ['Leafy greens like moringa', 'Plantains for potassium'],
                    'europe': ['Whole grain breads', 'Local seasonal vegetables'],
                    'latinamerica': ['Beans and rice', 'Avocado for healthy fats'],
                    'northamerica': ['Fortified cereals', 'Lean poultry and fish']
                };
                
                // Get the base foods for the trimester
                const trimesterFoods = foods[trimester] || foods['1'];
                
                // Add regional foods if selected
                if (region !== 'global' && regionalAdditions[region]) {
                    trimesterFoods.push(...regionalAdditions[region]);
                }
                
                // Populate the food list
                trimesterFoods.forEach(food => {
                    const li = document.createElement('li');
                    li.className = 'nutrition-item';
                    li.textContent = food;
                    foodList.appendChild(li);
                });
            }
            
            // Region selector change handler
            document.getElementById('region-select').addEventListener('change', function() {
                const activeTrimester = document.querySelector('.trimester.active').getAttribute('data-trimester');
                updateNutritionRecommendations(activeTrimester);
            });
            
            // Button handlers
            document.getElementById('reset-wheel').addEventListener('click', function() {
                wheelState.lmpAngle = -Math.PI / 2;
                wheelState.eddAngle = Math.PI / 2;
                drawWheel();
            });
            
            document.getElementById('save-dates').addEventListener('click', function() {
                alert('Dates saved! In a full implementation, this would store your dates for future reference.');
            });
            
            // Initialize the wheel
            drawWheel();
            updateNutritionRecommendations('1');
        });
    </script>
</body>
</html>
